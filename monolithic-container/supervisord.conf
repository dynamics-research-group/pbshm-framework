[supervisord]
nodaemon=true
user=appuser
logfile=/app/supervisord.log
logfile_maxbytes=0
loglevel=warn
pidfile=/tmp/supervisord.pid

[program:mongodb]
command=mongod --dbpath /data/db --logpath /var/log/mongodb/mongod.log --auth --quiet
user=appuser
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
loglevel=warn
priority=100

[program:caddy]
command=caddy run --config /etc/caddy/Caddyfile
user=appuser
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
loglevel=warn
priority=150

[program:flask-app]
command=/app/flask-startup.sh
user=appuser
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
loglevel=warn
priority=200
